{
  "meta": {
    "project": "SONGMETRIX",
    "date": "2025-09-09",
    "prepared_by": "Generated by Software Development Manager"
  },
  "product_overview": "SONGMETRIX is an innovative music intelligence platform that bridges the gap between traditional radio and digital streaming, providing real-time, comprehensive analytics and insights to the music industry. It empowers users to analyze, compare, and visualize music consumption data across multiple channels to identify trends, market opportunities, and consumption behaviors with precision.",
  "core_goals": [
    "Deliver a unified platform integrating radio and streaming music data with real-time insights.",
    "Enable music industry professionals to make data-driven decisions through comprehensive analytics and trend detection.",
    "Provide an intuitive dashboard with customizable reports and visualizations tailored for multiple user personas.",
    "Support scalable and secure SaaS environment with flexible subscription plans and seamless payment integration.",
    "Ensure high availability, performance, and compliance with data protection regulations like LGPD."
  ],
  "key_features": [
    "Real-time monitoring of top songs played on major Brazilian radio stations with advanced filters by genre, region, and radio station.",
    "Automatic synchronization and integration with Spotify data including playlist analytics and detailed streaming metrics.",
    "Comparative dashboard showing performance gaps and trends between radio airplay and streaming platforms.",
    "Administrative tools for user management, system notifications, usage reporting, and configurable system settings.",
    "Secure payment processing integration with Stripe supporting subscription management and 14-day free trial period.",
    "Comprehensive REST APIs for managing streams, users, payments, uploads, and administrative insights.",
    "File upload capability for logos and images within the platform.",
    "Robust database optimization scripts to ensure fast and efficient data retrieval and dashboard performance."
  ],
  "user_flow_summary": [
    "User discovers SONGMETRIX through research or referral and signs up with a simple registration process offering a 14-day free trial.",
    "User undergoes an onboarding tutorial to familiarize with core functionalities and dashboard navigation.",
    "User accesses the dashboard to view comparative analytics, rankings, and performance metrics with ability to apply custom filters and export reports.",
    "User interacts with Spotify integration to explore playlist data, streaming metrics, and content discovery with audio previews.",
    "Users manage subscriptions and payments seamlessly through integrated Stripe checkout and receive notifications on significant platform changes.",
    "Administrators configure system settings, monitor platform usage, and access detailed insights and logs via the admin panel."
  ],
  "validation_criteria": [
    "Dashboard loads data within 3 seconds with 99.9% uptime guarantee under normal load.",
    "Accurate and up-to-date integration with Spotify and radio station APIs ensuring real-time data availability.",
    "Successful processing of payments through Stripe with secure handling of webhooks for subscription lifecycle.",
    "Role-based access control enforced correctly across user management and administrative features.",
    "File uploads validate file types and sizes and store securely without data loss.",
    "API endpoints respond efficiently with documented status codes and error handling.",
    "Platform complies fully with LGPD regulation ensuring user data privacy and security.",
    "High user adoption rates with retention above 70% and a system error rate below 0.1%."
  ],
  "code_summary": {
    "tech_stack": [
      "Node.js",
      "Express.js",
      "React",
      "Vite",
      "PostgreSQL",
      "Supabase",
      "TanStack Query",
      "React Hook Form",
      "Tailwind CSS",
      "Chart.js",
      "Stripe",
      "OpenAI",
      "TypeScript",
      "Zod",
      "Winston",
      "Multer",
      "CORS",
      "Axios",
      "Moment.js",
      "Date-fns"
    ],
    "features": [
      {
        "name": "Dashboard API",
        "description": "API para dashboard com métricas de streaming de rádio, incluindo dados essenciais, secundários e opcionais",
        "files": [
          "server/routes/dashboard.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/dashboard": {
              "get": {
                "summary": "Obter dados principais do dashboard",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Dados do dashboard"
                  }
                }
              }
            },
            "/api/dashboard/essential": {
              "get": {
                "summary": "Obter dados essenciais do dashboard",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Dados essenciais"
                  }
                }
              }
            },
            "/api/dashboard/secondary": {
              "get": {
                "summary": "Obter dados secundários do dashboard",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Dados secundários"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Streams Management API",
        "description": "API para gerenciamento de streams de rádio, incluindo CRUD completo, busca e filtros",
        "files": [
          "server/routes/streams.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/streams": {
              "get": {
                "summary": "Listar todos os streams",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Lista de streams"
                  }
                }
              },
              "post": {
                "summary": "Criar novo stream",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "201": {
                    "description": "Stream criado"
                  }
                }
              }
            },
            "/api/streams/{id}": {
              "get": {
                "summary": "Obter stream por ID",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Dados do stream"
                  }
                }
              },
              "put": {
                "summary": "Atualizar stream",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Stream atualizado"
                  }
                }
              },
              "delete": {
                "summary": "Deletar stream",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "204": {
                    "description": "Stream deletado"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Radio Status API",
        "description": "API para monitoramento de status das rádios e estatísticas de funcionamento",
        "files": [
          "server/routes/radios.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/radios/status": {
              "get": {
                "summary": "Obter status das rádios",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Status das rádios"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "User Management API",
        "description": "API para gerenciamento de usuários, autenticação e autorização",
        "files": [
          "server/routes/users.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/users": {
              "get": {
                "summary": "Listar usuários",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Lista de usuários"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Payment Processing API",
        "description": "API para processamento de pagamentos via Stripe, incluindo checkout e webhooks",
        "files": [
          "server/routes/payments.js",
          "server/stripe.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/payments": {
              "post": {
                "summary": "Processar pagamento",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Pagamento processado"
                  }
                }
              }
            },
            "/webhook": {
              "post": {
                "summary": "Webhook do Stripe",
                "responses": {
                  "200": {
                    "description": "Webhook processado"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "File Upload API",
        "description": "API para upload de arquivos, incluindo logos e imagens",
        "files": [
          "server/routes/uploads.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/uploads": {
              "post": {
                "summary": "Upload de arquivo",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "requestBody": {
                  "content": {
                    "multipart/form-data": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "file": {
                            "type": "string",
                            "format": "binary"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Arquivo enviado"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Admin Management API",
        "description": "APIs administrativas para insights, configurações de LLM e gerenciamento geral",
        "files": [
          "server/routes/adminRoutes.js",
          "server/routes/adminInsightRoutes.js",
          "server/routes/adminLLMRoutes.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/admin": {
              "get": {
                "summary": "Painel administrativo",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Dados administrativos"
                  }
                }
              }
            },
            "/api/admin/insights": {
              "get": {
                "summary": "Insights administrativos",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Insights gerados"
                  }
                }
              }
            },
            "/api/admin/llm-settings": {
              "get": {
                "summary": "Configurações de LLM",
                "security": [
                  {
                    "basicAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Configurações do LLM"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Customer Management API",
        "description": "API para gerenciamento de clientes e relacionamento",
        "files": [
          "server/routes/customerRoutes.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/customers": {
              "get": {
                "summary": "Listar clientes",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Lista de clientes"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Ranking API",
        "description": "API para rankings e estatísticas de performance das rádios",
        "files": [
          "server/ranking.js"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/ranking": {
              "get": {
                "summary": "Obter rankings",
                "security": [
                  {
                    "bearerAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Rankings das rádios"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Database Optimization",
        "description": "Scripts de otimização de índices do banco de dados para melhor performance",
        "files": [
          "scripts/optimize-dashboard-indexes.sql"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "Database Optimization Scripts",
            "description": "Scripts SQL para otimização de performance do dashboard"
          }
        }
      }
    ]
  }
}
